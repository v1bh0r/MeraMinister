"use strict";angular.module("MeraMinisterApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("MeraMinisterApp").controller("MainCtrl",["$scope","Ministry","googleFeeds",function(a,b,c){b.states().then(function(b){a.states=b}),a.getMinisters=function(c){b.mps(c).then(function(b){a.ministers=b})},a.news=null,a.loadNews=function(b){c.fetchFeed("https://news.google.com/news?hl=en&as_occt=any&as_qdr=y&q="+b.name+"&um=1&ie=UTF-8&output=rss").then(function(b){a.news=b})}}]),angular.module("MeraMinisterApp").service("Ministry",["$http","$q","MyMinisterInfo",function(a,b,c){return{states:function(){return c.call("states.json")},mps:function(a){return c.call("states/"+a+"/mps.json")}}}]),angular.module("MeraMinisterApp").service("MyMinisterInfo",["$http","$q","JsonP",function(a,b,c){var d="http://api.myminister.info/";return{call:function(a){return c.fetch(d+a)}}}]),angular.module("MeraMinisterApp").service("JsonP",["$q","$http",function(a,b){return{fetch:function(c){var d=a.defer();return b({method:"JSONP",url:c+"?callback=JSON_CALLBACK",cache:!0}).then(function(a){d.resolve(JSON.parse(a.data.model))},function(a){d.reject(a)}),d.promise}}}]),angular.module("MeraMinisterApp").provider("googleFeeds",function(){function a(){this.fetchFeed=function(a){var d=b.defer();if(c){var e=new c.Feed(a);e.load(function(a){a.error?d.reject(a.error):d.resolve(a.feed.entries)})}else d.reject("Feeds engine not initialised");return d.promise}}var b=null,c=null;this.initialise=function(a){c=a},this.$get=["$q",function(c){return b=c,new a}]}).config(["googleFeedsProvider",function(a){a.initialise(google.feeds)}]);